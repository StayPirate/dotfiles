# Outputs initialization
#
# Thinkpad T470p display
set $laptop_display "Chimei Innolux Corporation 0x150C Unknown"
# 2x Samsung 28"
set $office_display_1 "Samsung Electric Company LU28R55 H4ZT900393"
set $office_display_2 "Samsung Electric Company LU28R55 H4ZT900018"

# Laptop display
output $laptop_display {
    mode 1920x1080
}
# Office main display (Front)
output $office_display_1 {
    pos 2560 0
    mode 2560x1440
}
# Office second display (Left)
output $office_display_2 {
    pos 0 0
    mode 2560x1440
}

# Enable/Disable laptop display when open/close the lid
bindswitch --locked lid:on output $laptop_display disable
bindswitch --locked lid:off output $laptop_display enable

# workspace <name> output <outputs...>
#     Specifies that workspace name should be shown on the specified outputs. Multiple outputs can be listed and the
#     first available will be used. If the workspace gets placed on an output further down the list and an output 
#     that is higher on the list becomes available, the workspace will be moved to the higher priority output.
workspace $ws_web   output $office_display_1 $laptop_display
workspace $ws_mail  output $office_display_1 $laptop_display
workspace $ws_work  output $office_display_2 $office_display_1 $laptop_display
workspace $ws_code  output $office_display_1 $laptop_display
workspace $ws_chat  output $office_display_2 $office_display_1 $laptop_display
workspace $ws_music output $office_display_1 $laptop_display
workspace $ws7      output $office_display_1 $laptop_display
workspace $ws8      output $office_display_1 $laptop_display
workspace $ws_kali  output $office_display_2 $office_display_1 $laptop_display

### Idle configuration
#
# * After 300s execute loginctl lock-session to inform other running
#   programs that the pc is going to be locked (eg. KeePassXC will lock open databases).
#   At the same time, swayidle `lock` handler will be triggered and swaylock is started.
# * After 305s turn off the screen.
# * As soon as any input device triggers, turn on the screen. Swaylock will be asking
#   for the user's password.
# * `lock` is the event-handler for logind session locked event. I set logind.conf to lock
#   the session all the time that the laptop's lid is closed. This way swayidle starts
#   swaylock and as soon as the lid is reopened the user's password is asked.
exec swayidle -w \
         timeout 300 $lock_machine \
         timeout 305 'swaymsg "output * dpms off"' \
              resume 'swaymsg "output * dpms on"' \
         lock swaylock
#
# This will lock your screen and keyrings after 300 seconds of inactivity, then
# turn off your displays after another 305 seconds, and turn your screens back on
# when resumed.